<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>
<!--用户基本信息-->
<div class="col-sm-9 col-sm-offset-3 col-md-10 col-md-offset-2 main" th:fragment="user_fragment">

    <h3 class="sub-header" th:text="${navName}">基本信息</h3>
    <form class="form-horizontal" role="form" action="/user/modify">
        <div class="form-group" >
            <label class="col-sm-2 control-label">用户名</label>
            <div class="col-sm-10">
                <p class="form-control-static" th:text="${user.username}">用户名</p>
            </div>
        </div>
        <div class="form-group">
            <label class="col-sm-2 control-label">手机号</label>
            <div class="col-sm-10">
                <p class="form-control-static" th:text="${user.phone}">手机号</p>
            </div>
        </div>
        <div class="form-group">
            <label class="col-sm-2 control-label">邮箱</label>
            <div class="col-sm-10">
                <p class="form-control-static" th:text="${user.email}">邮箱</p>
            </div>
        </div>
        <div class="form-group">
            <label class="col-sm-2 control-label">性别</label>
            <div class="col-sm-10" th:if="${user.gender} eq '1'">
                <p class="form-control-static" >男</p>
            </div>
            <div class="col-sm-10" th:if="${user.gender} eq '0'">
                <p class="form-control-static" >女</p>
            </div>
        </div>
        <div class="form-group">
            <label class="col-sm-2 control-label">生日</label>
            <div class="col-sm-10">
                <p class="form-control-static" th:text="${#dates.format(user.birthday,'yyyy-MM-dd')}">生日</p>
            </div>
        </div>
        <div class="form-group">
            <label class="col-sm-2 control-label">城市</label>
            <div class="col-sm-10">
                <p class="form-control-static" th:text="${user.city}">城市</p>
            </div>
        </div>
        <div class="form-group">
            <label class="col-sm-2 control-label"></label>
            <div class="col-sm-10">
                <button type="submit" class="btn btn-info">修改信息</button>
            </div>
        </div>
       <input type="hidden" name="userId" th:value="${user.id}">
    </form>
</div>

<!--用户基本信息修改-->
<div class="col-sm-9 col-sm-offset-3 col-md-10 col-md-offset-2 main" th:fragment="user_modify">

    <h3 class="sub-header" th:text="${navName}">基本信息</h3>
    <form class="form-horizontal" role="form" action="/user/update" method="post">
        <div class="form-group" >
            <label class="col-sm-2 control-label">用户名</label>
            <div class="col-sm-10">
                <input type="text" class="form-control" name="username" th:placeholder="${user.username}">
            </div>
        </div>
        <div class="form-group">
            <label class="col-sm-2 control-label">手机号</label>
            <div class="col-sm-10">
                <input type="text" class="form-control" name="phone" th:placeholder="${user.phone}">
            </div>
        </div>
        <div class="form-group">
            <label class="col-sm-2 control-label">邮箱</label>
            <div class="col-sm-10">
                <input type="text" class="form-control" name="email" th:placeholder="${user.email}">
            </div>
        </div>
        <div class="form-group">
            <label class="col-sm-2 control-label">性别</label>
            <div class="col-sm-10" th:if="${user.gender} eq '1'">
                <input type="text" class="form-control" name="gender" placeholder="男">
            </div>
            <div class="col-sm-10" th:if="${user.gender} eq '0'">
                <input type="text" class="form-control" name="gender" placeholder="女">
            </div>
        </div>
        <div class="form-group">
            <label class="col-sm-2 control-label">生日</label>
            <div class="col-sm-10">
                <input type="text" class="form-control" name="birthday" th:placeholder="${#dates.format(user.birthday,'yyyy-MM-dd')}">
            </div>
        </div>
        <div class="form-group">
            <label class="col-sm-2 control-label">城市</label>
            <div class="col-sm-10">
                <input type="text" class="form-control" name="city" th:placeholder="${user.city}">
            </div>
        </div>
        <div class="form-group">
            <label class="col-sm-2 control-label"></label>
            <div class="col-sm-10">
                <button type="submit" class="btn btn-warning">确认修改</button>
            </div>
        </div>
        <input type="hidden" name="userId" th:value="${user.id}">
    </form>
</div>

<!--收货地址-->
<div class="col-sm-9 col-sm-offset-3 col-md-10 col-md-offset-2 main" th:fragment="receive_address">

    <h3 class="sub-header" th:text="${navName}">收货地址</h3>

    <div class="form-group" th:if="${addressList} eq null">
        <label class="col-sm-2 control-label"></label>
        <div class="col-sm-10">
            <p class="form-control-static">暂无收货地址</p>
        </div>
    </div>

    <div class="row placeholders">

            <div class="col-xs-8 col-sm-4 placeholder" th:each="address:${addressList}">
                <form method="post" action="/address/modify">
                        <label class="col-sm-3 control-label">收货人</label>
                    <div class="col-sm-8">
                        <p th:text="${address.username}">收货人</p>
                    </div>
                    <div class="form-group">
                        <label class="col-sm-3 control-label">手机号</label>
                        <div class="col-sm-8">
                            <p class="form-control-static" th:text="${address.phoneNumber}">手机号</p>
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="col-sm-3 control-label">邮编</label>
                        <div class="col-sm-8">
                            <p class="form-control-static" th:text="${address.postCode}">邮箱</p>
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="col-sm-3 control-label">详细地址</label>
                        <div class="col-sm-8">
                            <p class="form-control-static" th:text="${address.detailAddress}"></p>
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="col-sm-3 control-label">设为默认</label>
                        <div class="col-sm-8">
                            <input type="checkbox" id="default"/>
                        </div>
                    </div>
                    <input type="hidden" name="userId" th:value="${address.userId}">
                    <div class="form-group">
                        <div class="col-sm-8">
                            <button type="submit" class="btn btn-warning">修改收货地址</button>
                        </div>
                    </div>

                </form>
            </div>

        <div class="col-xs-6 col-sm-3 placeholder">

            <form  method="get" action="/address/add.html" style="margin-top: 40%">
                <button type="submit" class="btn btn-danger">添加收货地址</button>
                <input type="hidden" name="userId" th:value="${userId}">
            </form>
        </div>
    </div>


</div>

<!--添加收货地址-->
<div class="col-sm-9 col-sm-offset-3 col-md-10 col-md-offset-2 main" th:fragment="address_add_page">
    <h3 class="sub-header" th:text="${navName}">添加收货地址</h3>
    <form class="form-horizontal" role="form" action="/address/add" method="post">
        <div class="form-group" >
            <label class="col-sm-2 control-label">收货人</label>
            <div class="col-sm-10">
                <input type="text" class="form-control" name="username">
            </div>
        </div>
        <div class="form-group">
            <label class="col-sm-2 control-label">手机号</label>
            <div class="col-sm-10">
                <input type="text" class="form-control" name="phoneNumber">
            </div>
        </div>
        <div class="form-group">
            <label class="col-sm-2 control-label">邮编</label>
            <div class="col-sm-10">
                <input type="text" class="form-control" name="postCode">
            </div>
        </div>
        <div class="form-group">
            <label class="col-sm-2 control-label">详细地址</label>
            <div class="col-sm-10">
                <input type="text" class="form-control" name="detailAddress" placeholder="">
            </div>
        </div>
        <div class="form-group">
            <label class="col-sm-2 control-label"></label>
            <div class="col-sm-10">
                <button type="submit" class="btn btn-info">添加</button>
            </div>
        </div>
        <input type="hidden" name="userId" th:value="${userId}">
    </form>
</div>

<!--用户重置密码-->
<div class="col-sm-9 col-sm-offset-3 col-md-10 col-md-offset-2 main" th:fragment="password">

    <h3 class="sub-header">通过密码重置</h3>
    <form class="form-horizontal" role="form" action="/user/password/old" method="post">
        <div class="form-group" >
            <label class="col-sm-2 control-label">手机号</label>
            <div class="col-sm-10">
                <input type="text" class="form-control" name="phone">
            </div>
        </div>
        <div class="form-group">
            <label class="col-sm-2 control-label">当前密码</label>
            <div class="col-sm-10">
                <input type="text" class="form-control" name="password">
            </div>
        </div>
        <div class="form-group">
            <label class="col-sm-2 control-label">新密码</label>
            <div class="col-sm-10">
                <input type="text" class="form-control" name="newPassword">
            </div>
        </div>
        <div class="form-group">
            <label class="col-sm-2 control-label"></label>
            <div class="col-sm-10">
                <button type="submit" class="btn btn-danger">确认重置</button>
            </div>
        </div>
    </form>

    <h3 class="sub-header">通过短信验证码重置</h3>
    <form class="form-horizontal" role="form" action="/user/password/msg" method="post">
        <div class="form-group" >
            <label class="col-sm-2 control-label">手机号</label>
            <div class="col-sm-10">
                <input type="text" class="form-control" name="phone">
            </div>
        </div>
        <div class="form-group">
            <label class="col-sm-2 control-label">新密码</label>
            <div class="col-sm-10">
                <input type="text" class="form-control" name="password">
            </div>
        </div>
        <div class="form-group">
            <label class="col-sm-2 control-label">短信验证码码</label>
            <div class="col-sm-10">
                <input type="text" class="form-control" name="msgCode">
            </div>
        </div>
        <div class="form-group">
            <label class="col-sm-2 control-label"></label>
            <div class="col-sm-10">
                <button class="btn btn-info">获取验证码</button>
                <button type="submit" class="btn btn-danger">确认重置</button>
            </div>
        </div>
    </form>
</div>

<!--用户订单-->
<div class="col-sm-9 col-sm-offset-3 col-md-10 col-md-offset-2 main" th:fragment="order_fragment">

    <h3 class="sub-header">我的订单</h3>

    <ul class="nav nav-tabs">
            <li th:class="${orderCase}=='all'? 'active':''"><a href="/user/order/all">全部</a></li>
            <li th:class="${orderCase}=='unPay'? 'active':''"><a href="/user/order/unPay">待付款</a></li>
            <li th:class="${orderCase}=='unPost'? 'active':''"><a href="/user/order/unPost">待发货</a></li>
            <li th:class="${orderCase}=='unConfirm'? 'active':''"><a href="/user/order/unConfirm">待收货</a></li>
            <li th:class="${orderCase}=='complete'? 'active':''"><a href="/user/order/complete">已完成</a></li>
            <li th:class="${orderCase}=='cancled'? 'active':''"><a href="/user/order/cancled">已取消</a></li>
    </ul>

    <div class="form-group" th:if="${orderList} eq null">
        <label class="col-sm-2 control-label"></label>
        <div class="col-sm-10">
            <p class="form-control-static">暂无订单，快去下单吧</p>
        </div>
    </div>

    <div class="panel panel-info"  th:each="order:${orderList}">
        <div class="panel-heading">
            <h3 class="panel-title" th:text="${order.orderName}">订单名称</h3>
        </div>
        <div class="panel-body">
            <div class="row col-md-10">
            <div class="thumbnail col-sm-2 order-item" th:each="orderItem:${order.omsOrderItems}">
                <img class="col-md-12 col-sm-12 col-lg-12" th:src="${orderItem.productPic}">
                <div class="caption">
                    <p th:text="${orderItem.productName}">商品名称</p>
                    <p class="text-muted" th:text="'数量：'+${orderItem.productQuantity}"></p>
                    <p class="text-muted" th:text="'价格：'+${orderItem.productPrice}"></p>
                </div>
            </div>
                <div class="thumbnail col-sm-2 order-item">
                    <img class="col-md-12 col-sm-12 col-lg-12" src="/img/bg_default.png">
                    <div class="caption">
                        <p th:text="'共计：'+${order.totalAmount}">订单总价格</p>
                        <p></p>
                        <div th:if="${order.status} eq 0" >
                            <a th:href="'http://123.56.175.117:8082/alipay/submit?outTradeNo='+${order.orderSn}+'&totalAmount='+${order.totalAmount}"><button class="btn btn-danger">立即支付</button></a>
                            <p class="text-warning">未支付订单将在下单5个小时后自动取消</p>
                        </div>
                        <p class="text-muted" th:text="'下单时间：'+${#dates.format(order.createTime, 'dd/MMM/yyyy HH:mm')}"></p>
                    </div>
                </div>
            </div>
            <div class="col-md-1 order-operate">
                <a th:if="${order.status} eq 2" th:href="'/user/order/operate/postInfo/'+${order.orderSn}"><button class="btn btn-default">查看物流</button></a>
                <a th:if="${order.status} eq 2" th:href="'/user/order/operate/confirm/'+${order.orderSn}"><button class="btn btn-default">确认收货</button></a>
                <a th:if="${order.status} eq 3" th:href="'/user/order/operate/addComment/'+${order.orderSn}" ><button class="btn btn-default">添加评价</button></a>
                <a th:if="${order.status} le 2" th:href="'/user/order/operate/cancle/'+${order.orderSn}"><button class="btn btn-default">取消订单</button></a>
                <a th:if="${order.status} ge 3" th:href="'/user/order/operate/delete/'+${order.orderSn}"><button class="btn btn-default">删除订单</button></a>
                <a th:if="${order.status} eq 3" th:href="'/user/order/operate/afterSales/'+${order.orderSn}"><button class="btn btn-default">申请售后</button></a>
                <a href="/user/help"><button class="btn btn-default">客服咨询</button></a>
            </div>
        </div>
    </div>

</div>

<!--添加订单评价-->
<div class="col-sm-9 col-sm-offset-3 col-md-10 col-md-offset-2 main" th:fragment="order_comment_fragment">
    <h3 class="sub-header">添加评价</h3>
    <div class="col-md-6" th:each="orderItem:${orderSkuList}">
        <div class="thumbnail col-sm-10 col-md-10 order-item">
            <img class="col-md-4 col-sm-4" th:src="${orderItem.productPic}">
            <div class="caption">
                <p th:text="${orderItem.productName}">商品名称</p>
                <p></p>
                <p class="text-muted" th:text="'数量：'+${orderItem.productQuantity}"></p>
                <p class="text-muted" th:text="'价格：'+${orderItem.productPrice}"></p>
            </div>
        </div>
        <form class="form-horizontal" role="form" action="/user/comment/add" method="post" id="addCommnetForm">
            <div class="form-group" >
                <label class="col-sm-3 control-label">商品评分</label>
                <div class="col-sm-8">
                    <input type="text" class="form-control" name="commentScore" id="commentScore" placeholder="满分为5分，最低1分"/>
                </div>
            </div>
            <div class="form-group">
                <label class="col-sm-3 control-label">评价内容</label>
                <div class="col-sm-8">
                    <input type="text" class="form-control" name="commentContent" id="commentContent" placeholder="说说商品的优缺点吧，5~50个字">
                </div>
            </div>
            <input type="hidden" th:value="${orderItem.orderId}" name="orderId"/>
            <input type="hidden" th:value="${orderItem.productSkuId}" name="productSkuId"/>
            <input type="hidden" th:value="${orderItem.productName}" name="productName"/>
            <input type="hidden" th:value="${orderItem.productPic}" name="pics"/>
            <div class="form-group">
                <label class="col-sm-2 control-label"></label>
                <div class="col-sm-10">
                    <button class="btn btn-info">确认评价</button>
                </div>
            </div>
        </form>
    </div>
</div>

<!--用户评价-->
<div class="col-sm-9 col-sm-offset-3 col-md-10 col-md-offset-2 main" th:fragment="user_comment_fragment">
    <h3 class="sub-header">我的评价</h3>
    <div class="form-group" th:if="${userCommentList} eq null">
        <label class="col-sm-2 control-label"></label>
        <div class="col-sm-10">
            <p class="form-control-static">暂无评价，快去下单吧</p>
        </div>
    </div>
    <div class="col-md-6" th:each="item:${userCommentList}">
        <div class="thumbnail col-sm-10 col-md-10 order-item">
            <img class="col-md-4 col-sm-4" th:src="${item.pics}">
            <div class="caption">
                <p th:text="${item.productName}">商品名称</p>
                <p></p>
                <p class="text-muted" th:text="'评价时间：'+${item.creatTime}"></p>
            </div>
        </div>
        <form class="form-horizontal" role="form" action="/user/comment/delete" method="post">
            <div class="form-group" >
                <label class="col-sm-3 control-label">商品评分</label>
                <div class="col-sm-8">
                    <p th:text="${item.commentScore}"></p>
                </div>
            </div>
            <div class="form-group">
                <label class="col-sm-3 control-label">评价内容</label>
                <div class="col-sm-8">
                    <p th:text="${item.commentContent}"></p>
                </div>
            </div>
            <input type="hidden" th:value="${item.orderId}" name="orderId"/>
            <input type="hidden" th:value="${item.productSkuId}" name="productSkuId"/>
            <div class="form-group">
                <label class="col-sm-2 control-label"></label>
                <div class="col-sm-10">
                    <button type="submit" class="btn btn-danger">删除评价</button>
                </div>
            </div>
        </form>
    </div>
</div>
</body>

</html>